<!DOCTYPE>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script type="text/javascript" src="../internal.js"></script>
    <style type="text/css">
        .wrapper{width: 540px; margin: 10px auto;}
        #appShow {border: 1px solid #ddd;}
        .errorMsg{font-size: 13px;margin: 10px;color: #dd0000}
    </style>
</head>
<body>
    <div class="wrapper">
        <div id="appShow"></div>
    </div>
    <script type="text/javascript">
alert(editor.options.webAppKey);
        //豁､螟・・鄂ｮ謔ｨ蝨ｨ逋ｾ蠎ｦ荳顔筏隸ｷ蛻ｰ逧・ppkey縲・
        //var apikey = editor.options.webAppKey;
        var apikey = "sQfA9vf8rTqa02FfNABX00k7";
        if ( apikey && apikey.length == 24 ) {
            var searchConfig = {
                container:'appShow', //螳ｹ蝎ｨID
                tips:"", //隸･蛟ｼ逕ｨ莠手・蜉ｨ貂・ｩｺ
                search:1, //譏ｯ蜷ｦ譏ｾ遉ｺ謳懃ｴ｢譯・
                ps:12, //豈城｡ｵ譏ｾ遉ｺ逧・擅謨ｰ
                suggest:1, //譏ｯ蜷ｦ蠑蜷ｯ謳懃ｴ｢閾ｪ蜉ｨ螳梧・
                limit:0, //謳懃ｴ｢扈捺棡譏ｾ遉ｺ譚｡謨ｰ・・陦ｨ遉ｺ譌髯仙宛
                searchNow:0, //譏ｯ蜷ｦ蝨ｨ蛻晏ｧ句喧螳梧・譌ｶ遶句叉謳懃ｴ｢
                apikey:apikey, //豈丈ｺｺ蠕・
                pager:1,
                cid:7134562,
                outputHTML:1
            },baiduApp;

            function clickCallback() {
                baiduApp.addEventListener( 'getAppHTML', function ( e, data ) {
                    var url = 'http://app.baidu.com/app/enter?appid='+data.data['app_id'] +'&tn=app_canvas&app_spce_id=1&apikey='+apikey+'&api_key=' + apikey;
                    editor.execCommand( "webapp", {url:url,width:data.uniWidth,height:data.uniHeight+60,logo:data.data['app_logo'],title:data.data['app_name']});
                    dialog.close();
                } );
            }

            var script = document.createElement( "script" );
            script.type = "text/javascript";
            script.src = "http://app.baidu.com/appweb/api/search?auto=yes&container=container&apikey=" + apikey + "&instanceName=baiduApp&callback=clickCallback&config=searchConfig";
            document.body.appendChild( script );
        } else {
            $G( "appShow" ).innerHTML = "<p class='errorMsg'>"+lang.tip1+"<a title='"+lang.anthorApi+"' href='http://app.baidu.com/static/cms/getapikey.html' target='_blank'>"+lang.applyFor+"</a></p><p class='errorMsg'>"+lang.tip2+"</p>" ;
        }

    </script>
</body>
</html>
